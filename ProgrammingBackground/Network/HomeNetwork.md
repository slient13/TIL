#network

# 참고 자료
[강의_영상::[WEB2-Home server - YouTube](https://www.youtube.com/playlist?list=PLuHgQVnccGMA52uRBmSwqcvtI5IMoFclJ)]

# IP address
[[ip]] 참고

# 공유기
근거리 환경에서 기기들간 통신을 지원하여 ==사설망==을 형성할 수 있도록 해주는 네트워크 기기이다. 사설망을 외부의 인터넷과 연결하기 위해 하나의 ==공용 IP 주소==를 할당 받는다.

다만 [[#사설 IP 주소]]는 외부망에서 통용되지 않으므로 인터넷 연결에 사용할 수는 없다. 때문에 공유기에 연결된 기기들이 인터넷을 이용하고자 한다면 공용 IP 주소를 가지고 있는 공유기가 중간에서 중개 및 변환을 해주어야 하는데 이를 [[#Network Address Translation]]라고 한다.

# Network Address Translation
[[#공유기]]가 자신과 연결된 기기들이 인터넷 등 외부 망과 연결할 수 있도록 상호 변환을 제공하는 기능이다. 다음과 같은 순서로 진행된다.

우선 내부 기기에서 ==인터넷을 향해 어떠한 요청을 했는지==를 공유기 내부에 기록한다. 이는 후에 수신받은 데이터를 어디로 보내주어야 하는지에 대한 단서가 된다.

다음으로 공유기가 해당 요청을 요청한 기기 대신 인터넷에 전달한다. 이 때 인터넷 및 목적지에서는 마치 ==공유기가 메시지를 보낸 것처럼 인식==한다. 메시지를 수신한 목적지에서는 그에 대한 대답을 공유기로 되돌려준다.

공유기는 수신한 정보를 앞서 기록해둔 요청 기록에 근거하여 요청을 했던 기기로 전달해준다.

이러한 방식으로 단 하나의 주소를 가지고도 여러개의 기기가 외부망과 통신할 수 있도록 제공한다.

# Port
서버 컴퓨터에는 하나의 서버만 존재할 수도 있지만 그렇지 않을 수도 있고, 대부분은 복수의 서버가 형성되어 있다. 하지만 어디서 들어온 요청이든 같은 입구로 들어온다면 어떤 서버를 향한 요청인지를 알 수 없다. 때문에 메시지를 목적지별로 구분하기 위해 네트워크상 입구를 제공하는데 이것이 [[#Port]]이다.

[[#Port]]는 최대 `0 ~ 65535` 까지 존재하며, 이 중 `0 ~ 1024` 까지는 미리 약속된 형태로만 사용된다. 이를 ==well-known port==라고 부르면 대표적으로 ==22 - SSH==, ==80 - http==가 있다.

웹 서버의 경우 기본적으로 ==80번 포트==에 배정되어 있다. 다만, 한 컴퓨터에 두개 이상의 웹서버를 구성하려고 한다면 이미 80번 포트는 사용되고 있으니 별도의 포트를 배정해야만 한다. 보통은 ==8080 포트==를 사용하는데 이는 관습일 뿐 다른 포트를 배정해도 상관은 없다.

일반적으로 웹 브라우저에 주소를 입력하여 접근하면 ==80번 포트==로 진입이 된다. 만약 80번 포트 대신 8080 포트로 연결을 하고자 한다면 주소 뒤에 `:8080` 이렇게 덧붙여주면 된다.

## Port Forwarding
서버가 클라이언트로부터 메시지를 받기 위해서는 자신의 IP 주소를 알려주어야 한다. 허나 만약 서버가 독립적인 IP 주소를 가지지 못하고 있고 [[#공유기]] 등에 연결되어 있다면 외부망에서 통용되는 자신만의 주소가 없기 때문에 클라이언트로부터 메시지를 받을 수가 없다. 이 때 사용하는 것이 [[#Port Forwarding]]이다.

[[#Port Forwarding]]이란 서버가 자신의 사설 주소 대신 공유기의 공용 주소를 알려주되, 목적지를 구분할 수 있도록 특정 [[#Port]]로 진입해달라고 알리는 것으로, 공유기는 해당 [[#Port]]로 들어온 메시지를 [[#Network Address Translation]]를 통해 사설망 내 서버로 전달해준다.

이를 위해선 [[#공유기]] 설정에서 ==포트 포워드 설정==이라는 것을 입력해주어야 한다. UI는 공유기마다 다를 수 있지만 대체로 ==어떤 포트로 들어온 메시지를 내부망의 어떤 주소, 어떤 포트로 보낼 것인가?==를 지정하도록 되어있다.

# Dynamic Host Configuration Protocol
[[#공유기]]를 통해 사설망을 구성하려고 하면 공유기에 연결되는 기기들에 대해서 [[#사설 IP 주소]]를 배정해야 한다. 다만 이 과정은 전산학에 대한 지식이 없이는 제대로 수행하기가 어렵다. 때문에 일반적으로 [[#사설 IP 주소]]는 [[#공유기]]에서 임의로 정해주는데 그것이 [[#Dynamic Host Configuration Protocol]]이다.

구체적으로 공유기에는 [[#DHCP server]]란 것이 존재하고 이에 연결하는 기기에는 [[#DHCP client]]라는 것이 있다. 통신 기기가 처음 공유기에 연결될 때 [[#DHCP client]]는 [[#DHCP server]]에게 IP 주소 할당을 요청하며 자신의 [[#MAC Address]]를 알려준다. 

[[#DHCP server]]는 이에 대하여 사용 가능한 [[#사설 IP 주소]]를 배정하고 그 내역을 기록한다. 

이를 통해 사용자는 까다로운 주소 설정 과정을 생략하고 손쉽게 공유기에 연결하거나 다른 통신망으로 전환할 수 있다. 특히 이동하며 수시로 다양한 네트워크에 연결되어야 하는 모바일 기기들을 사용함에 있어 큰 도움을 준다.

## DHCP server
[[#Dynamic Host Configuration Protocol]]에서 [[#DHCP client]]의 요청을 받아 사용 가능한 [[#사설 IP 주소]]를 배정하는 역할을 한다.

[[#공유기]]의 ==내부 네트워크 설정==에서 이것의 동작 방식을 상세하게 지정할 수 있다.

[[#Dynamic IP Address]]에서도 좀 더 대규모로 복잡한 [[#DHCP server]]가 존재하며, 이것이 주기적으로 [[#공용 IP 주소]]를 할당하고 수거하는 일을 담당한다.

## DHCP client
[[#Dynamic Host Configuration Protocol]]에서 기기에 설치되어 있으며, 기기가 공유기 등 네트워크에 연결되었을 때 자동으로 [[#DHCP server]]에 자신을 알림으로써 [[#사설 IP 주소]]를 할당해달라는 요청을 해준다. 

이것이 없다면 직접 네트워크에 대한 지식을 가지고 주소를 직접 할당해주어야 한다.

# MAC Address
통신 기기 각각을 구분하기 위해 사용되는 일련의 고유한 번호들로, [[#IP address]]와는 별개로 기기 자체를 물리적으로 구분하기 위해 사용된다.